# search-service

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Elasticsearch —á–µ—Ä–µ–∑ GraphQL.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–µ—á–µ—Ç–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ü–µ–Ω–µ, —Ä–∞–∑–º–µ—Ä—É, —Ü–≤–µ—Ç—É, –º–∞—Ç–µ—Ä–∏–∞–ª—É, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –±—Ä–µ–Ω–¥—É –∏ —Å–∫–ª–∞–¥—É
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üì° GraphQL API

### Query: `searchProducts`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.

**–í—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`SearchInput`):**

| –ü–æ–ª–µ        | –¢–∏–ø         | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|------------|----------|
| `name`      | String     | –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ |
| `productID` | Int        | ID –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ |
| `variantID` | Int        | ID –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ç–æ–≤–∞—Ä–∞ |
| `sku`       | String     | SKU –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ç–æ–≤–∞—Ä–∞ |
| `material`  | String     | –ú–∞—Ç–µ—Ä–∏–∞–ª –≤–∞—Ä–∏–∞–Ω—Ç–∞ |
| `color`     | String     | –¶–≤–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç–∞ |
| `size`      | String     | –†–∞–∑–º–µ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞ |
| `stock`     | Int        | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–ø–∞—Å –Ω–∞ —Å–∫–ª–∞–¥–µ |
| `categoryID`| Int        | ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ |
| `brandID`   | Int        | ID –±—Ä–µ–Ω–¥–∞ |
| `minPrice`  | Float      | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ |
| `maxPrice`  | Float      | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ |
| `page`      | Int        | –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1) |
| `limit`     | Int        | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20, –º–∞–∫—Å–∏–º—É–º 100) |

---

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

```graphql
query {
  searchProducts(input: {
    name: "—Ñ—É—Ç–±–æ–ª–∫–∞",
    minPrice: 500,
    maxPrice: 2000,
    page: 1,
    limit: 10
  }) {
    products {
      id
      name
      description
      categoryID
      brandID
      variants {
        variantID
        sku
        price
        sizes
        colors
        material
        stock
        rating
      }
    }
    total
    page
    limit
    pages
  }
}


{
  "data": {
    "searchProducts": {
      "products": [
        {
          "id": 1,
          "name": "–§—É—Ç–±–æ–ª–∫–∞ —Ö–ª–æ–ø–∫–æ–≤–∞—è",
          "description": "–ú—è–≥–∫–∞—è —Ö–ª–æ–ø–∫–æ–≤–∞—è —Ñ—É—Ç–±–æ–ª–∫–∞",
          "categoryID": 1,
          "brandID": 1,
          "variants": [
            {
              "variantID": "var_1",
              "sku": "T-SHIRT-001",
              "price": 1500.0,
              "sizes": [42, 44, 46],
              "colors": ["–±–µ–ª—ã–π", "—á–µ—Ä–Ω—ã–π"],
              "material": "—Ö–ª–æ–ø–æ–∫",
              "stock": 100,
              "rating": 4.5
            }
          ]
        }
      ],
      "total": 150,
      "page": 1,
      "limit": 20,
      "pages": 8
    }
  }
}


üõ†Ô∏è –ó–∞–ø—É—Å–∫
docker-compose up --build

–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:

–í—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ SearchInput –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã. –ï—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤—Å–µ —Ç–æ–≤–∞—Ä—ã —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.

page –∏ limit –∑–∞–¥–∞—é—Ç –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –≤—ã–≤–æ–¥. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π limit ‚Äî 100.

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (_score) –≤ Elasticsearch.